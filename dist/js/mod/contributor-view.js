define(["lib/knockout","mod/contributor-ratings"],function(e,t){var n=function(n){var r=this,i=1,s={name:1,rating:-1,last:-1};this.donorList=e.observableArray(n),this.sortField=e.observable(""),this.sortAsc=e.observable(!1),this.formatDate=function(e){return e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()},this.formatAmount=function(e){return"$"+parseFloat(e).toFixed(2)},this.formatRank=function(e){return(1+t.plot(e))*16},this.toggleSort=function(e){r.sortField()!==e?(r.sortField(e),i=s[e]=s[e]||1):i=-i,r.sortAsc(i!==s[e])},this.sortName=function(){r.toggleSort("name"),r.donorList.sort(function(e,t){return e.name>t.name?i:e.name<t.name?-i:0})},this.sortRating=function(){r.toggleSort("rating"),r.donorList.sort(function(e,t){return(e.total-t.total)*i})},this.sortLast=function(){r.toggleSort("last"),r.donorList.sort(function(e,t){var n=e.lastDate-t.lastDate;return n===0&&(n=e.lastAmount-t.lastAmount),n*i})},this.sortLast()};return n})