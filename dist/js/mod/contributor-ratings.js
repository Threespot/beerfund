define(["lib/underscore"],function(e){var t={min:function(e){return Math.min.apply(Math,e)},max:function(e){return Math.max.apply(Math,e)},sort:function(e){return e.sort(function(e,t){return e-t})},equalInterval:function(e,t){var n=[],r=this.min(e),i=(this.max(e)-r)/t,s;for(s=0;s<=t;s++)n.push(r),r+=i;return n},quantile:function(e,t){e=this.sort(e);var n=[],r=(e.length-1)/t,i;for(i=0;i<=t;i++)n.push(e[Math.round(i*r)]);return n}},n=function(){this.reset()};return n.prototype={reset:function(){this.breaks=[],this.values=[],this.maxValue=0},addValue:function(e){e=parseInt(e,10),this.values.push(e),this.maxValue=Math.max(this.maxValue,e)},setBreaks:function(){var n=e.uniq(this.values);n=e.compact(n),n=t.quantile(n,4),this.breaks=e.uniq(n)},plot:function(e){var t;for(t=this.breaks.length-1;t>=0;t--)if(e>=this.breaks[t])return t;return-1}},new n})